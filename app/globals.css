@tailwind base;
@tailwind components;
@tailwind utilities;

/* =====================================================
   THEME TOKENS (HSL)
   ===================================================== */
@layer base {
  :root {
    /* Neutral palette - light */
    --background: 42 44% 97%;
    --foreground: 26 23% 24%;
    --card: 42 44% 99%;
    --card-foreground: 26 23% 26%;
    --popover: 45 42% 98%;
    --popover-foreground: 26 23% 24%;

    /* Font stacks */
    --font-sans: 'Nunito Sans', 'Inter', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-serif: 'Cormorant Garamond', 'Playfair Display', 'Merriweather', serif;
    --font-script: 'Parisienne', 'Lucida Handwriting', 'Segoe Script', cursive;

    /* Brand and supporting accents */
    --brand: 276 38% 55%;
    --brand-foreground: 52 100% 97%;
    --accent: 145 24% 88%;
    --accent-foreground: 152 20% 24%;
    --accent-warm: 22 58% 66%;
    --accent-cool: 196 32% 52%;

    /* Spiritual character accents */
    --spiritual-ember: 24 64% 58%;
    --spiritual-mist: 162 40% 58%;
    --spiritual-aurora: 278 36% 62%;
    --spiritual-light: 56 100% 96%;
    --spiritual-shadow: 218 38% 20%;
    --spiritual-gradient: linear-gradient(135deg, hsl(var(--spiritual-ember) / 0.92) 0%, hsl(var(--spiritual-mist) / 0.88) 48%, hsl(var(--spiritual-aurora) / 0.85) 100%);
    --spiritual-gradient-soft: radial-gradient(120% 120% at 15% 18%, hsl(var(--spiritual-light) / 0.32) 0%, transparent 72%);


    /* Action colors */
    --primary: var(--brand);
    --primary-foreground: var(--brand-foreground);
    --secondary: 42 32% 92%;
    --secondary-foreground: 26 20% 30%;
    --muted: 42 26% 90%;
    --muted-foreground: 26 16% 38%;
    --destructive: 5 60% 50%;
    --destructive-foreground: 36 44% 96%;

    /* Structural surfaces */
    --border: 34 26% 82%;
    --input: 34 26% 82%;
    --ring: var(--brand);
    --radius: 0.75rem;

    /* Optional charts */
    --chart-1: 276 38% 55%;
    --chart-2: 162 34% 48%;
    --chart-3: 32 62% 58%;
    --chart-4: 198 28% 54%;
    --chart-5: 350 40% 54%;

    /* Ambient gradients */
    --body-gradient-1: hsl(var(--spiritual-aurora) / 0.18);
    --body-gradient-2: hsl(var(--accent) / 0.12);
    --body-gradient-3: hsl(var(--accent-warm) / 0.14);
    --body-overlay-top: hsl(var(--background) / 0.92);
    --body-overlay-bottom: hsl(var(--background) / 0.75);
    color-scheme: light;
  }

  .dark {
    /* Neutral palette - dark */
    --background: 222 32% 10%;
    --foreground: 36 32% 90%;
    --card: 222 28% 14%;
    --card-foreground: 36 32% 92%;
    --popover: 222 30% 12%;
    --popover-foreground: 36 32% 90%;

    /* Brand and supporting accents */
    --brand: 278 48% 68%;
    --brand-foreground: 52 96% 97%;
    --accent: 158 22% 22%;
    --accent-foreground: 36 32% 92%;
    --accent-warm: 26 60% 62%;
    --accent-cool: 182 44% 46%;

    /* Spiritual character accents */
    --spiritual-ember: 28 68% 62%;
    --spiritual-mist: 168 44% 52%;
    --spiritual-aurora: 286 56% 68%;
    --spiritual-light: 48 78% 90%;
    --spiritual-shadow: 215 38% 14%;
    --spiritual-gradient: linear-gradient(135deg, hsl(var(--spiritual-ember) / 0.88) 0%, hsl(var(--spiritual-mist) / 0.8) 46%, hsl(var(--spiritual-aurora) / 0.78) 100%);
    --spiritual-gradient-soft: radial-gradient(140% 140% at 78% -18%, hsl(var(--spiritual-aurora) / 0.28) 0%, transparent 75%);


    /* Action colors */
    --primary: var(--brand);
    --primary-foreground: var(--brand-foreground);
    --secondary: 210 20% 22%;
    --secondary-foreground: 36 32% 88%;
    --muted: 210 22% 20%;
    --muted-foreground: 36 24% 72%;
    --destructive: 4 64% 52%;
    --destructive-foreground: 0 0% 96%;

    /* Structural surfaces */
    --border: 210 24% 30%;
    --input: 210 24% 30%;
    --ring: 278 48% 68%;

    /* Ambient gradients */
    --body-gradient-1: hsl(var(--spiritual-aurora) / 0.22);
    --body-gradient-2: hsl(var(--accent-cool) / 0.24);
    --body-gradient-3: hsl(var(--accent-warm) / 0.24);
    --body-overlay-top: hsl(var(--background) / 0.58);
    --body-overlay-bottom: hsl(var(--background) / 0.42);
    color-scheme: dark;
  }
}

/* =====================================================
   BASE: TYPOGRAPHY, FOCUS, BACKGROUND
   ===================================================== */
@layer base {
  *,
  *::before,
  *::after {
    @apply border-border;
    box-sizing: border-box;
  }

  html {
    @apply antialiased;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    overflow-x: clip;
  }

  body {
    @apply bg-background text-foreground min-h-screen;
    font-family: var(--font-sans);
    letter-spacing: 0.01em;
    line-height: 1.7;
    background-color: hsl(var(--background));
    background-image: radial-gradient(
        1200px 620px at 14% -12%,
        var(--body-gradient-1),
        transparent 70%
      ),
      radial-gradient(
        980px 560px at 110% 2%,
        var(--body-gradient-2),
        transparent 58%
      ),
      radial-gradient(
        1200px 640px at -12% 128%,
        var(--body-gradient-3),
        transparent 60%
      );
    background-repeat: no-repeat;
    overflow-x: clip;
  }

  :where(button, input, textarea, select) {
    font-family: inherit;
    letter-spacing: inherit;
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    width: 100vw; /* fija a viewport, no al documento */
    height: 100dvh; /* evita “salirse” por subpíxeles */
    pointer-events: none;
    background: linear-gradient(
        to bottom,
        var(--body-overlay-top),
        transparent 32%
      ),
      linear-gradient(to top, var(--body-overlay-bottom), transparent 28%);
    z-index: -1;
    contain: layout paint; /* aísla capa y evita que afecte al flujo */
    transform: translateZ(0); /* fuerza capa compuesta y elimina bleed */
  }

  ::selection {
    background: hsl(var(--brand) / 0.18);
    color: hsl(var(--foreground));
  }
  ::-moz-selection {
    background: hsl(var(--brand) / 0.18);
    color: hsl(var(--foreground));
  }

  a {
    @apply text-foreground transition;
    text-decoration: none;
    font-weight: 500;
  }
  a:hover {
    color: hsl(var(--brand));
  }

  :focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }

  :where(button, [role="button"], input, textarea, select):focus-visible {
    @apply ring-2 ring-offset-2 ring-offset-background;
    --tw-ring-color: hsl(var(--ring));
  }

  img,
  video {
    @apply rounded-lg;
  }
}
html,
body {
  height: auto;
  min-height: 100%;
  margin: 0;
  overflow-y: auto; /* evita scroll “extra” vertical */
  overflow-x: clip; /* ya lo tienes, lo mantenemos */
}

/* =====================================================
   BASE: TYPOGRAPHY SCALE
   ===================================================== */
@layer base {
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: hsl(var(--foreground));
    font-family: var(--font-serif);
    font-weight: 500;
    letter-spacing: 0.015em;
    line-height: 1.25;
    text-rendering: optimizeLegibility;
  }

  h1 {
    font-size: clamp(2.1rem, 2.8vw + 1rem, 3.2rem);
  }
  h2 {
    font-size: clamp(1.8rem, 2.1vw + 0.8rem, 2.4rem);
  }
  h3 {
    font-size: clamp(1.45rem, 1.6vw + 0.6rem, 1.8rem);
  }
  h4 {
    font-size: clamp(1.2rem, 1.2vw + 0.5rem, 1.4rem);
  }

  p {
    margin-bottom: 1.2em;
    max-width: 72ch;
  }

  p.lead {
    font-size: clamp(1.15rem, 1.25vw + 0.8rem, 1.35rem);
    color: hsl(var(--muted-foreground));
    letter-spacing: 0.01em;
  }

  small {
    font-size: 0.85rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: hsl(var(--muted-foreground) / 0.8);
  }

  blockquote {
    margin: 1.8em 0;
    padding-left: 1.5rem;
    border-left: 2px solid hsl(var(--brand) / 0.35);
    color: hsl(var(--muted-foreground));
    font-family: var(--font-serif);
    font-size: 1.1rem;
    line-height: 1.6;
  }
}

/* =====================================================
   COMPONENT HELPERS
   ===================================================== */
@layer components {
  .container-app {
    @apply mx-auto w-full max-w-5xl px-6 sm:px-8 xl:px-10;
  }

  .container-app-narrow {
    @apply mx-auto w-full max-w-3xl px-6 sm:px-8;
  }

  .section {
    @apply py-14 md:py-24;
  }

  .card {
    @apply rounded-3xl border border-border/70 bg-card/90 text-card-foreground shadow-soft;
    backdrop-filter: blur(14px);
  }

  .surface {
    @apply rounded-3xl border border-border/60 bg-card/75 backdrop-blur-xl shadow-soft;
  }

  .surface-soft {
    @apply rounded-3xl border border-border/55 bg-card/70;
    border-radius: 2.5rem;
    backdrop-filter: blur(24px);
    box-shadow: 0 24px 64px -32px hsl(var(--spiritual-aurora) / 0.32);
  }

  .glass {
    background: linear-gradient(
      to bottom right,
      hsl(var(--card) / 0.75),
      hsl(var(--accent) / 0.42)
    );
    @apply border border-white/30 backdrop-blur-md;
  }

  .btn {
    @apply inline-flex items-center justify-center rounded-full px-6 py-2.5 text-sm font-semibold
      bg-primary text-primary-foreground shadow-soft transition focus-visible:outline-none;
    letter-spacing: 0.18em;
    text-transform: uppercase;
  }

  .btn-outline {
    @apply inline-flex items-center justify-center rounded-full px-6 py-2.5 text-sm font-semibold
      border border-border bg-transparent text-foreground transition hover:bg-accent/70 hover:border-transparent;
    letter-spacing: 0.18em;
    text-transform: uppercase;
  }

  .prose-muted {
    @apply text-sm text-muted-foreground leading-relaxed;
    max-width: 68ch;
  }

  .btn:hover,
  .btn:focus-visible {
    transform: translateY(-1px);
    box-shadow: 0 26px 56px -32px hsl(var(--brand) / 0.32);
  }

  .btn-outline:hover,
  .btn-outline:focus-visible {
    color: hsl(var(--foreground));
    transform: translateY(-1px);
    box-shadow: 0 20px 48px -30px hsl(var(--accent-cool) / 0.28);
  }
}

/* =====================================================
   UTILITIES
   ===================================================== */
@layer utilities {
  .shadow-soft {
    box-shadow: 0 18px 42px -26px hsl(var(--spiritual-shadow) / 0.22);
  }

  .shadow-lift {
    box-shadow: 0 28px 68px -34px hsl(var(--brand) / 0.28);
  }

  .ring-brand {
    box-shadow: 0 0 0 3px hsl(var(--background)), 0 0 0 6px hsl(var(--brand));
  }

  .ring-outline {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }

  .text-gradient {
    background: linear-gradient(
      120deg,
      hsl(var(--spiritual-ember) / 0.95) 0%,
      hsl(var(--brand)) 50%,
      hsl(var(--spiritual-aurora)) 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }


  .spiritual-card {
    position: relative;
    isolation: isolate;
    overflow: hidden;
    border-radius: 2.5rem;
    background: var(--spiritual-gradient);
    color: hsl(var(--spiritual-light));
    border: 1px solid hsl(var(--spiritual-light) / 0.24);
    box-shadow: 0 42px 120px -64px hsl(var(--spiritual-shadow) / 0.45);
    backdrop-filter: blur(18px);
    z-index: 0;
  }

  .spiritual-card::before,
  .spiritual-card::after {
    content: '';
    position: absolute;
    pointer-events: none;
    mix-blend-mode: lighten;
    opacity: 0.85;
    z-index: -1;
  }

  .spiritual-card::before {
    inset: -42% 6% auto auto;
    height: 240px;
    width: 240px;
    background: radial-gradient(circle, hsl(var(--spiritual-light) / 0.5), transparent 74%);
    filter: blur(3px);
  }

  .spiritual-card::after {
    inset: auto -18% -42% auto;
    height: 320px;
    width: 320px;
    background: radial-gradient(circle, hsl(var(--spiritual-aurora) / 0.38), transparent 74%);
  }

  .spiritual-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.45rem;
    padding: 0.45rem 1rem;
    border-radius: 9999px;
    background: hsl(var(--spiritual-light) / 0.2);
    border: 1px solid hsl(var(--spiritual-light) / 0.4);
    color: hsl(var(--spiritual-light));
    text-transform: uppercase;
    letter-spacing: 0.24em;
    font-size: 0.75rem;
    font-weight: 600;
    box-shadow: 0 20px 40px -28px hsl(var(--spiritual-ember) / 0.8);
    backdrop-filter: blur(6px);
  }

  .spiritual-chip::before {
    content: '';
    height: 0.4rem;
    width: 0.4rem;
    border-radius: 9999px;
    background: hsl(var(--spiritual-light));
    box-shadow: 0 0 12px hsl(var(--spiritual-light) / 0.7);
  }

  .spiritual-aura {
    position: relative;
    z-index: 0;
  }

  .spiritual-aura::after {
    content: '';
    position: absolute;
    inset: -45% -10% auto -25%;
    height: 320px;
    width: 320px;
    background: var(--spiritual-gradient-soft);
    filter: blur(4px);
    opacity: 0.75;
    pointer-events: none;
    z-index: -1;
  }

  .spiritual-orb {
    position: relative;
    isolation: isolate;
  }

  .spiritual-orb::before {
    content: '';
    position: absolute;
    inset: -40% auto auto -22%;
    width: 180px;
    height: 180px;
    background: radial-gradient(circle at center, hsl(var(--accent) / 0.35), transparent 72%);
    filter: blur(8px);
    opacity: 0.85;
    pointer-events: none;
    z-index: -1;
  }

  .text-balance {
    text-wrap: balance;
  }

  .bg-grid {
    background-image: linear-gradient(
        hsl(var(--border) / 0.25) 1px,
        transparent 1px
      ),
      linear-gradient(90deg, hsl(var(--border) / 0.25) 1px, transparent 1px);
    background-size: 40px 40px;
  }

  .bg-dots {
    background-image: radial-gradient(
      hsl(var(--border) / 0.3) 1px,
      transparent 0
    );
    background-size: 22px 22px;
  }

  .radius {
    border-radius: var(--radius);
  }

  .ring-brand-focus:focus-visible {
    box-shadow: 0 0 0 3px hsl(var(--background)), 0 0 0 6px hsl(var(--ring));
  }
}

/* =====================================================
   ACCESSIBILITY AND COMPATIBILITY
   ===================================================== */
* {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border)) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
*::-webkit-scrollbar-track {
  background: transparent;
}
*::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border));
  border-radius: 9999px;
}

@media (forced-colors: active) {
  :focus-visible {
    box-shadow: none !important;
    outline: 2px solid CanvasText !important;
    outline-offset: 2px;
  }
}

@supports (-webkit-touch-callout: none) {
  body {
    background-attachment: scroll;
  }
}

@media (prefers-reduced-motion: no-preference) {
  * {
    transition-property: color, background-color, border-color, box-shadow,
      transform;
    transition-duration: 150ms;
    transition-timing-function: ease;
  }
}

